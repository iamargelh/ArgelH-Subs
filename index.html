<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Subtitles Site</title>
    <style>
        /* Estilos CSS para dar estilo al sitio web */
        .directory {
            margin-left: 20px;
        }
        .file {
            margin-left: 40px;
        }
    </style>
</head>
<body>
    <h1>My Subtitles Site</h1>
    <ul id="filetree">
    </ul>

    <script>
        // Obtener el archivo JSON mediante una petición AJAX
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var filetree = document.getElementById("filetree");
                var data = JSON.parse(this.responseText);
                buildTree(data, filetree);
            }
        };
        xmlhttp.open("GET", "subs.json", true);
        xmlhttp.send();

        // Función recursiva para construir el árbol de archivos y directorios
        function buildTree(data, parent) {
            data.children.forEach(function(item) {
                var li = document.createElement("li");
                li.innerHTML = item.name;
                if (item.type === "directory") {
                    li.classList.add("directory");
                    var ul = document.createElement("ul");
                    buildTree(item, ul);
                    li.appendChild(ul);
                } else {
                    li.classList.add("file");
                    li.addEventListener("click", function() {
                        window.location.href = item.page;
                    });
                }
                parent.appendChild(li);
            });
        }
    </script>
</body>
</html>