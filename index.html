<!DOCTYPE html>
<html>
  <head>
    <title>(ArgelH-Subs)</title>
    <link rel="icon" href="https://i.imgur.com/jycGdTy.png" />
    <style>
      html {
        font-family: "Times New Roman", Times, serif;
        font-size: 62.5%;
      }

      body {
        font-size: 3.2rem;
      }
    </style>
  </head>

  <body>
    <div id="path"></div>
    <div id="contents"></div>
    <script>
      let rootDirectoryName = '';

      fetch("tree.json")
        .then((response) => response.json())
        .then((data) => {
          const contentsDiv = document.getElementById("contents");
          const pathDiv = document.getElementById("path");
          rootDirectoryName = data.name;
          

          function renderPath() {
            let path = "";
            const pathElements = Array.from(pathDiv.childNodes);
            pathElements.forEach((element, index) => {
              if (index === pathElements.length - 1) {
                path += element.innerText;
              } else {
                path += `${element.innerText} / `;
              }
            });
            return path;
          }

          function renderContents(node) {
            contentsDiv.innerHTML = "";
            const firstDiv = document.createElement("div");
            firstDiv.innerHTML = `<a href="#"> ⤴ 📂 .. </a>`;
            contentsDiv.appendChild(firstDiv);
            node.forEach((child) => {
              const childDiv = document.createElement("div");
              if (child.type === "file") {
                const fileName = child.name.replace(".md", "");
                childDiv.innerHTML = `<a href="${child.page}" target="_blank">↪ 📄 ${fileName}</a>`;
              } else if (child.type === "directory") {
                childDiv.innerHTML = `<a href="#">↪ 📁 ${child.name}</a>`;
                childDiv.addEventListener("click", () => {
                  const newPathElement = document.createElement("span");
                  newPathElement.innerText = `${child.name}`;
                  pathDiv.appendChild(newPathElement);
                  renderPath();
                  renderContents(child.children);
                });
              }
              contentsDiv.appendChild(childDiv);
            });
          }

          renderContents(data.children);
        })
        .catch((error) => console.error(error));
    </script>
  </body>
</html>
